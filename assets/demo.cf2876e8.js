import{f as o,A as P,d as S,r as m,B as j,o as h,a as y,b as g,t as _,p as O,j as b}from"./app.069b597e.js";import{l as R}from"./lodash.2e1e3599.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";(function(e,c){if(e.setImmediate)return;var i=1,u={},d=!1,r=e.document,s;function I(t){typeof t!="function"&&(t=new Function(""+t));for(var a=new Array(arguments.length-1),n=0;n<a.length;n++)a[n]=arguments[n+1];var D={callback:t,args:a};return u[i]=D,s(i),i++}function w(t){delete u[t]}function E(t){var a=t.callback,n=t.args;switch(n.length){case 0:a();break;case 1:a(n[0]);break;case 2:a(n[0],n[1]);break;case 3:a(n[0],n[1],n[2]);break;default:a.apply(c,n);break}}function f(t){if(d)setTimeout(f,0,t);else{var a=u[t];if(a){d=!0;try{E(a)}finally{w(t),d=!1}}}}function T(){s=function(t){process.nextTick(function(){f(t)})}}function x(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}function A(){var t="setImmediate$"+Math.random()+"$",a=function(n){n.source===e&&typeof n.data=="string"&&n.data.indexOf(t)===0&&f(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),s=function(n){e.postMessage(t+n,"*")}}function B(){var t=new MessageChannel;t.port1.onmessage=function(a){var n=a.data;f(n)},s=function(a){t.port2.postMessage(a)}}function C(){var t=r.documentElement;s=function(a){var n=r.createElement("script");n.onreadystatechange=function(){f(a),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function M(){s=function(t){setTimeout(f,0,t)}}var l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,{}.toString.call(e.process)==="[object process]"?T():x()?A():e.MessageChannel?B():r&&"onreadystatechange"in r.createElement("script")?C():M(),l.setImmediate=I,l.clearImmediate=w})(typeof self=="undefined"?typeof o=="undefined"?o:o:self);var p,k=typeof o!="undefined"&&o||typeof self!="undefined"&&self||window,H=Function.prototype.apply,L=function(){return new v(H.call(setInterval,k,arguments),clearInterval)};p=function(e){e&&e.close()};function v(e,c){this._id=e,this._clearFn=c}v.prototype.unref=v.prototype.ref=function(){};v.prototype.close=function(){this._clearFn.call(k,this._id)};typeof self!="undefined"&&self.setImmediate||typeof o!="undefined"&&o.setImmediate||o&&o.setImmediate;typeof self!="undefined"&&self.clearImmediate||typeof o!="undefined"&&o.clearImmediate||o&&o.clearImmediate;const F=({domSelector:e,maxWait:c=1e3*8})=>{let i;return new Promise((u,d)=>{let r=0;L(()=>{P(e)&&e.value?(p(i),u(e)):R.exports.isFunction(e)&&e()?(p(i),u(e())):(r+=200,r>=c&&(p(i),d(new Error("Await Dom Timeout."))))},200)})};const N=e=>(O("data-v-ad7b2ad6"),e=e(),b(),e),$=N(()=>g("div",null,"\u8BF7\u6253\u5F00\u63A7\u5236\u53F0\u67E5\u770Bdom",-1)),q={key:1,class:"border"},U=S({setup(e){const c=m(null),i=m(!1),u=m(null);j(()=>{setTimeout(()=>{if(document){const s=document.createElement("div");s.setAttribute("class","border"),s.setAttribute("id","use-await-dom-test"),s.innerText="\u6211\u662Fdom1\u7684\u5F02\u6B65\u5B50\u7EC4\u4EF6",c.value.appendChild(s)}i.value=!0},2e3)});const d=m("dom1 \u52A0\u8F7D\u4E2D..."),r=m("dom2 \u52A0\u8F7D\u4E2D...");return F({domSelector:()=>{if(window&&window.document)return document.querySelector("#use-await-dom-test")}}).then(s=>{d.value="dom1 \u52A0\u8F7D\u5B8C\u6210",console.log("async dom1 loaded",s)}),F({domSelector:u}).then(s=>{r.value="dom2 \u52A0\u8F7D\u5B8C\u6210",console.log("async dom2 loaded",s)}),(s,I)=>(h(),y("div",null,[$,g("div",{ref_key:"father",ref:c,class:"border"},[g("div",null,_(d.value),1)],512),i.value?(h(),y("div",{key:0,class:"border",ref_key:"child2",ref:u},_(r.value),513)):(h(),y("div",q,_(r.value),1))]))}});var J=G(U,[["__scopeId","data-v-ad7b2ad6"]]);export{J as default};
