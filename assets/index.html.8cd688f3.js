import{B as m,G as f,d as g,r as u,o as p,a as o,b as s,t as c,F as k,H as v,l as E}from"./app.069b597e.js";import"./mitt.c9901edb.js";import"./index.4415e93f.js";import"./lodash.2e1e3599.js";const h=({onClickAway:e,target:n})=>{const t=a=>{if(Array.isArray(n.value)){if(!n.value.length)throw new Error("\u76EE\u6807\u5143\u7D20\u6570\u7EC4\u4E0D\u80FD\u4E3A\u7A7A");n.value.includes(a.target)||e(a)}else n.value!==a.target&&e&&e(a)};m(()=>{window.addEventListener("click",t)}),f(()=>{window.removeEventListener("click",t)})},F=E('<h1 id="useclickaway" tabindex="-1"><a class="header-anchor" href="#useclickaway" aria-hidden="true">#</a> useClickAway</h1><p>\u70B9\u51FB\u5176\u4ED6\u5143\u7D20\u56DE\u8C03</p><h2 id="\u4EE3\u7801\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u6F14\u793A" aria-hidden="true">#</a> \u4EE3\u7801\u6F14\u793A</h2><h3 id="\u57FA\u7840\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u4F7F\u7528" aria-hidden="true">#</a> \u57FA\u7840\u4F7F\u7528</h3><ol><li>\u5355\u5143\u7D20</li></ol>',5),B=s("ol",{start:"2"},[s("li",null,"\u5143\u7D20\u6570\u7EC4")],-1),y=E(`<h2 id="\u793A\u4F8B\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B\u4EE3\u7801" aria-hidden="true">#</a> \u793A\u4F8B\u4EE3\u7801</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u8BE5\u94A9\u5B50\u5FC5\u987B\u5728 <code>setup</code> \u751F\u547D\u5468\u671F\u4E2D\u8FD0\u884C</p></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useClickAway <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;zcomposition&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLSpanElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useClickAway</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">onClickAway</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;click away&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  target
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u53C2\u6570" aria-hidden="true">#</a> \u53C2\u6570</h3><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th><th>\u7C7B\u578B</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>onClickAway</td><td>\u70B9\u51FB\u56DE\u8C03\u4E8B\u4EF6</td><td>(event: MouseEvent | TouchEvent) =&gt; void</td><td>-</td></tr><tr><td>target</td><td>\u8981\u6392\u9664\u7684\u5143\u7D20\u6216\u5143\u7D20\u6570\u7EC4</td><td>HTMLElement | HTMLElement[]</td><td>-</td></tr></tbody></table>`,6),q=g({setup(e){const n=u(null),t=u(0);h({onClickAway:()=>{t.value++},target:n});const a=u([1,2,3]),l=u([]),r=u(0);return h({onClickAway:()=>{r.value++},target:l}),(A,w)=>(p(),o(k,null,[F,s("p",null,[s("button",{ref_key:"target",ref:n},"\u6211\u662Fbutton",512)]),s("div",null,"\u70B9\u51FB\u4E86button\u4EE5\u5916\u7684\u5143\u7D20 "+c(t.value)+" \u6B21",1),B,(p(!0),o(k,null,v(a.value,(i,b)=>(p(),o("div",{key:i,ref_for:!0,ref:d=>{d&&(l.value[b]=d)}}," \u7B2C "+c(i)+" \u4E2A\u5143\u7D20 ",1))),128)),s("div",null,"\u70B9\u51FB\u4E86\u9664\u4EE5\u4E0A\u5143\u7D20\u4EE5\u5916\u7684\u5143\u7D20 "+c(r.value)+" \u6B21",1),y],64))}});export{q as default};
